<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üåÄ Joe Biden Stinky Butt MONEY CLICKER üåÄ</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    background: linear-gradient(to bottom, #0047ab, #87CEEB);
    font-family: Arial, Helvetica, sans-serif;
    overflow: hidden;
    color: white;
    image-rendering: pixelated;
  }
  #game {
    position: relative;
    width: 100vw;
    height: 100vh;
  }
  #main {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    max-width: 700px;
    margin: 0 auto;
    height: 100vh;
    padding: 20px;
    box-sizing: border-box;
  }
  #stats {
    position: absolute;
    left: 20px;
    top: 20px;
    background: rgba(0,0,0,0.6);
    padding: 20px;
    border-radius: 20px;
    border: 3px solid #ffcc00;
  }
  #leveldiv { font-size: 2rem; color: #ffcc00; margin-bottom: 10px; font-weight: bold; }
  #moneydiv { font-size: 2.2rem; color: #0f0; }
  #mpsdiv, #buildupdiv { font-size: 1.2rem; opacity: 0.9; }
  h1 {
    font-size: 3rem;
    margin: 10px;
    text-shadow: 4px 4px 0 #000, -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000;
    color: #ffcc00;
    text-align: center;
  }
  #biden {
    width: 220px;
    height: 320px;
    background: url('https://pngimg.com/uploads/biden/biden_PNG22.png') center/contain no-repeat;
    position: relative;
    transform-origin: top center;
    animation: doze 8s infinite ease-in-out;
  }
  @keyframes doze {
    0%, 100% { transform: rotate(0deg); }
    50%      { transform: rotate(12deg); }
  }
  #biden.awake-jolt {
    animation: none !important;
    transform: rotate(-8deg) translateY(-20px) !important;
  }
  #cloud {
    position: absolute;
    width: 180px;
    height: 90px;
    background: radial-gradient(circle at 30% 40%, #8B4513 0%, #3C2F2F 40%, transparent 70%);
    border-radius: 999px;
    opacity: 0;
    pointer-events: none;
    filter: blur(4px);
    bottom: 40px;
    left: 20px;
  }
  .stink-line {
    position: absolute;
    width: 2px;
    height: 60px;
    background: linear-gradient(transparent, #8B4513, #3C2F2F);
    opacity: 0;
    animation: rise 1.8s infinite;
  }
  @keyframes rise {
    0%   { transform: translateY(0) scale(1); opacity: 0.9; }
    100% { transform: translateY(-180px) scale(0.3); opacity: 0; }
  }
  #stinkbar {
    width: 500px;
    height: 30px;
    background: rgba(0,0,0,0.7);
    border-radius: 15px;
    overflow: hidden;
    margin: 30px 0;
    border: 3px solid #ffcc00;
  }
  #stinkfill {
    height: 100%;
    background: linear-gradient(to right, #0f0, #ff0, #f80, #f00);
    width: 0%;
    transition: width 0.3s ease;
  }
  #bigfan {
    font-size: 2.2rem;
    font-weight: bold;
    padding: 40px 80px;
    margin: 40px;
    border: 6px solid #000;
    border-radius: 50px;
    background: linear-gradient(145deg, #00c, #009);
    color: white;
    cursor: pointer;
    transition: all 0.15s;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  }
  #bigfan:hover { transform: scale(1.08); background: linear-gradient(145deg, #00f, #00c); box-shadow: 0 15px 40px rgba(0,0,255,0.4); }
  #bigfan:active { transform: scale(0.98); }
  #bigfan:disabled { opacity: 0.5; cursor: not-allowed; transform: none !important; }
  #info {
    font-size: 1.3rem;
    opacity: 0.9;
    text-align: center;
    max-width: 500px;
    margin-top: 20px;
  }
  #reset {
    display: none;
    font-size: 1.8rem;
    padding: 20px 50px;
    margin: 40px;
    border: 6px solid #000;
    border-radius: 30px;
    background: #900;
    color: white;
    cursor: pointer;
    transition: all 0.2s;
  }
  #reset:hover { background: #c00; transform: scale(1.05); }
  #shop {
    position: absolute;
    right: 20px;
    top: 20px;
    width: 320px;
    height: calc(100vh - 40px);
    overflow-y: auto;
    background: rgba(0,0,0,0.6);
    padding: 25px;
    border-radius: 25px;
    border: 3px solid #ffcc00;
  }
  .building {
    background: rgba(255,255,255,0.08);
    padding: 20px;
    margin: 15px 0;
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.2s;
    border: 2px solid transparent;
    position: relative;
  }
  .building:hover:not(.locked) {
    background: rgba(0,255,0,0.2);
    border-color: #0f0;
    transform: scale(1.03);
  }
  .building.locked {
    opacity: 0.4;
    cursor: default;
  }
  .building .emoji {
    font-size: 4rem;
    float: right;
    margin-left: 15px;
  }
  .building .name {
    font-size: 1.4rem;
    font-weight: bold;
    margin-bottom: 8px;
  }
  .building .owned, .building .prod, .building .cost {
    font-size: 1.1rem;
    opacity: 0.85;
    margin: 4px 0;
  }
  .building .lock {
    position: absolute;
    top: -10px;
    right: -10px;
    background: #900;
    color: white;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: bold;
  }
</style>
</head>
<body>

<div id="game">
  <div id="stats">
    <div id="leveldiv">Level: <span id="level">0</span></div>
    <div id="moneydiv">Money: <span id="money">0</span></div>
    <div id="mpsdiv">Money/sec: <span id="mps">0</span></div>
    <div id="buildupdiv">Buildup: <span id="buildup">1.0</span>/s</div>
  </div>

  <div id="main">
    <h1>üåÄ JOE BIDEN<br>STINKY BUTT MONEY CLICKER üåÄ</h1>
    <div id="biden">
      <div id="cloud"></div>
    </div>
    <div id="stinkbar">
      <div id="stinkfill"></div>
    </div>
    <button id="bigfan">üåÄ<br>FAN<br>üåÄ</button>
    <div id="info">Click FAN to earn <b>MONEY</b>! Buy buildings for passive money. Keep STINK below 100% or GAME OVER!</div>
    <button id="reset">üíÄ RESET PROGRESS üíÄ</button>
  </div>

  <div id="shop"></div>
</div>

<audio id="fart1" preload="auto">
  <source src="https://www.soundjay.com/human/fart-1.mp3" type="audio/mpeg">
</audio>
<audio id="fart2" preload="auto">
  <source src="https://www.soundjay.com/human/fart-2.mp3" type="audio/mpeg">
</audio>

<script>
const TICK_MS = 200;
const SAVE_INTERVAL = 10000;

const level_thresholds = [0, 20, 200, 2000, 20000, 200000, 2000000, 20000000, 1e10];

let money = 0;
let total_money = 0;
let stink = 0;
let prod_per_sec = 0;
let click_power = 1;
let passive_mult = 1;
let buildup_per_sec = 1.0;
let gameOver = false;
let lastFartTime = 0;

const buildings = [
  {id: 'intern', name: 'Intern Fanners', emoji: 'üë§', baseCost: 15, cps: 0.1, count: 0, reqLevel: 0},
  {id: 'boxfan', name: 'Box Fans', emoji: 'üåÄ', baseCost: 100, cps: 1, count: 0, reqLevel: 1},
  {id: 'purifier', name: 'HEPA Purifiers', emoji: 'üßπ', baseCost: 1100, cps: 8, count: 0, reqLevel: 2},
  {id: 'hvac', name: 'HVAC Units', emoji: 'üîß', baseCost: 12000, cps: 47, count: 0, reqLevel: 3},
  {id: 'ozone', name: 'Ozone Generators', emoji: '‚ö°', baseCost: 130000, cps: 260, count: 0, reqLevel: 4},
  {id: 'weather', name: 'Weather Service', emoji: 'üå§Ô∏è', baseCost: 1400000, cps: 1400, count: 0, reqLevel: 5},
  {id: 'nasa', name: 'NASA Scrubbers', emoji: 'üöÄ', baseCost: 20000000, cps: 7800, count: 0, reqLevel: 6}
];

const els = {
  money: document.getElementById('money'),
  mps: document.getElementById('mps'),
  level: document.getElementById('level'),
  buildup: document.getElementById('buildup'),
  stinkfill: document.getElementById('stinkfill'),
  bigfan: document.getElementById('bigfan'),
  reset: document.getElementById('reset'),
  biden: document.getElementById('biden'),
  cloud: document.getElementById('cloud'),
  shop: document.getElementById('shop')
};

const fart1 = document.getElementById('fart1');
const fart2 = document.getElementById('fart2');

function format(num, decimals = 1) {
  if (num === 0) return '0';
  if (num < 1000) return num.toFixed(decimals < 1 ? 0 : decimals);
  const units = ['K', 'M', 'B', 'T'];
  let u = 0;
  while (num >= 1000 && u < units.length - 1) {
    num /= 1000;
    u++;
  }
  return num.toFixed(decimals) + units[u];
}

function computeLevel() {
  for (let i = level_thresholds.length - 1; i >= 0; i--) {
    if (total_money >= level_thresholds[i]) return i;
  }
  return 0;
}

function computeProd() {
  prod_per_sec = buildings.reduce((sum, b) => sum + b.cps * b.count, 0);
}

function playFart(type = 1) {
  if (gameOver) return;
  const now = Date.now();
  if (now - lastFartTime < 500) return;
  lastFartTime = now;
  const sound = type === 1 ? fart1 : fart2;
  sound.currentTime = 0;
  sound.play().catch(() => {});
}

function createStinkLine() {
  const line = document.createElement('div');
  line.className = 'stink-line';
  line.style.left = (Math.random() * 140 + 20) + 'px';
  line.style.animationDuration = (1.2 + Math.random() * 1.1) + 's';
  els.cloud.appendChild(line);
  setTimeout(() => line.remove(), 2000);
}

function updateDozeSpeed() {
  const speed = Math.max(2, 8 - stink / 15);
  els.biden.style.animationDuration = speed + 's';
}

function updateCloud() {
  const op = Math.min(stink / 80, 1);
  els.cloud.style.opacity = op;
  els.cloud.style.transform = `scale(${1 + stink / 100}) translateY(-${stink}px)`;
  if (Math.random() < 0.3) createStinkLine();
}

function updateShop() {
  const level = computeLevel();
  buildings.forEach((b, i) => {
    const div = els.shop.children[i];
    if (!div) return;
    const countEl = div.querySelector('.count');
    const prodEl = div.querySelector('.prodrate');
    const costEl = div.querySelector('.costnum');
    countEl.textContent = b.count;
    const cost = Math.floor(b.baseCost * Math.pow(1.15, b.count));
    costEl.textContent = format(cost);
    const rate = b.cps * b.count;
    prodEl.textContent = format(rate, rate > 10 ? 0 : 1);
    const lockEl = div.querySelector('.lock');
    if (level < b.reqLevel) {
      div.classList.add('locked');
      if (!lockEl) {
        const lock = document.createElement('div');
        lock.className = 'lock';
        lock.textContent = `Lv ${b.reqLevel}`;
        div.appendChild(lock);
      }
    } else {
      div.classList.remove('locked');
      if (lockEl) lockEl.remove();
      const affordable = money >= cost;
      div.style.borderColor = affordable ? '#0f0' : 'transparent';
    }
  });
}

function updateDisplays() {
  els.money.textContent = format(money);
  els.mps.textContent = format(prod_per_sec * passive_mult, prod_per_sec * passive_mult > 10 ? 0 : 1);
  els.level.textContent = computeLevel();
  els.buildup.textContent = format(buildup_per_sec, 2);
  els.stinkfill.style.width = Math.min(100, (stink / 100) * 100) + '%';
  updateShop();
  updateCloud();
  updateDozeSpeed();
}

function buy(i) {
  if (gameOver) return;
  const b = buildings[i];
  const level = computeLevel();
  if (level < b.reqLevel) return;
  const cost = Math.floor(b.baseCost * Math.pow(1.15, b.count));
  if (money < cost) return;
  money -= cost;
  b.count++;
  computeProd();
  playFart(1);
  updateDisplays();
}

function tick() {
  const delta = TICK_MS / 1000;
  if (gameOver) return;
  const passive_delta = prod_per_sec * passive_mult * delta;
  money += passive_delta;
  stink -= passive_delta;
  const level = computeLevel();
  buildup_per_sec = 1.0 + (total_money * 0.00001) + (level * 0.3);
  stink += buildup_per_sec * delta;
  if (stink < 0) stink = 0;
  if (stink > 100) {
    gameOver = true;
    els.bigfan.disabled = true;
    els.bigfan.style.opacity = 0.5;
    els.reset.style.display = 'block';
    els.shop.style.opacity = 0.5;
    els.stinkfill.style.background = '#900';
    playFart(2);
  }
  total_money += passive_delta;
  if (passive_delta > 0 && Math.random() < Math.min(0.1, passive_delta / 5)) playFart(1);
  updateDisplays();
}

// Init shop
buildings.forEach((b, i) => {
  const div = document.createElement('div');
  div.className = 'building';
  div.dataset.i = i;
  div.innerHTML = `
    <div class="emoji">${b.emoji}</div>
    <div>
      <div class="name">${b.name}</div>
      <div class="owned">Owned: <span class="count">0</span></div>
      <div class="prod">Produces <span class="prodrate">${b.cps.toFixed(1)}</span> /s</div>
      <div class="cost">Next: <span class="costnum">${format(b.baseCost)}</span> money</div>
    </div>
  `;
  div.onclick = () => buy(i);
  els.shop.appendChild(div);
});

// Events
els.bigfan.onclick = () => {
  if (gameOver) return;
  money += click_power;
  stink = Math.max(0, stink - click_power);
  total_money += click_power;
  els.biden.classList.add('awake-jolt');
  playFart(2);
  setTimeout(() => els.biden.classList.remove('awake-jolt'), 250);
  updateDisplays();
};

els.reset.onclick = () => {
  localStorage.removeItem('bidenStinkySave');
  location.reload();
};

// Save/Load
function saveGame() {
  const data = {
    money,
    total_money,
    stink,
    buildings: buildings.map(b => b.count),
    click_power,
    passive_mult,
    version: 2
  };
  localStorage.setItem('bidenStinkySave', JSON.stringify(data));
}

function loadGame() {
  try {
    const dataStr = localStorage.getItem('bidenStinkySave');
    if (!dataStr) return;
    const data = JSON.parse(dataStr);
    if (data.version < 2) {
      localStorage.removeItem('bidenStinkySave');
      return;
    }
    money = data.money || 0;
    total_money = data.total_money || 0;
    stink = data.stink || 0;
    click_power = data.click_power || 1;
    passive_mult = data.passive_mult || 1;
    data.buildings.forEach((count, i) => { buildings[i].count = count; });
    computeProd();
    if (stink > 100) gameOver = true;
  } catch (e) {
    console.log('Load failed:', e);
    localStorage.removeItem('bidenStinkySave');
  }
}

// Start
loadGame();
computeProd();
updateDisplays();
setInterval(tick, TICK_MS);
setInterval(saveGame, SAVE_INTERVAL);

// Initial puff
setTimeout(() => {
  playFart(1);
  createStinkLine();
}, 1000);

</script>
</body>
</html>
